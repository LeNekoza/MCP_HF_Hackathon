<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Chart System Demo</title>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 20px;
            background: #f8fafc;
        }
        .demo-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .data-sample {
            background: #f1f5f9;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 12px;
            overflow-x: auto;
        }
        button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #2563eb;
        }
    </style>
</head>
<body>
    <h1>üöÄ Dynamic Chart System Demo</h1>
    <p>This page demonstrates how the dynamic chart system automatically adapts to different data structures.</p>

    <div class="demo-section">
        <h2>üìä Sample Data Structures</h2>
        
        <h3>1. Multi-Series Time Data (Line/Bar Charts)</h3>
        <div class="data-sample">
[
  { month: 'Jan', patients: 65, revenue: 45, satisfaction: 85 },
  { month: 'Feb', patients: 58, revenue: 52, satisfaction: 88 },
  { month: 'Mar', patients: 52, revenue: 58, satisfaction: 90 },
  { month: 'Apr', patients: 45, revenue: 62, satisfaction: 87 },
  { month: 'May', patients: 38, revenue: 68, satisfaction: 89 }
]
        </div>
        <button onclick="updateWithTimeData()">üìà Load Time Series Data</button>

        <h3>2. Category Data for Pie Charts</h3>
        <div class="data-sample">
[
  { label: 'Emergency', value: 35 },
  { label: 'Surgery', value: 25 },
  { label: 'General', value: 20 },
  { label: 'Pediatrics', value: 12 },
  { label: 'Cardiology', value: 8 }
]
        </div>
        <button onclick="updateWithPieData()">ü•ß Load Pie Chart Data</button>

        <h3>3. Multi-Dimensional Data for Scatter</h3>
        <div class="data-sample">
[
  { department: 'ICU', waitTime: 45, satisfaction: 78, patientLoad: 95 },
  { department: 'Emergency', waitTime: 65, satisfaction: 72, patientLoad: 88 },
  { department: 'Surgery', waitTime: 38, satisfaction: 85, patientLoad: 76 },
  { department: 'General', waitTime: 72, satisfaction: 68, patientLoad: 82 }
]
        </div>
        <button onclick="updateWithScatterData()">üìç Load Scatter Plot Data</button>

        <h3>4. Sales Performance Data</h3>
        <div class="data-sample">
[
  { quarter: 'Q1', sales: 120000, costs: 85000, profit: 35000 },
  { quarter: 'Q2', sales: 135000, costs: 92000, profit: 43000 },
  { quarter: 'Q3', sales: 142000, costs: 89000, profit: 53000 },
  { quarter: 'Q4', sales: 158000, costs: 95000, profit: 63000 }
]
        </div>
        <button onclick="updateWithSalesData()">üí∞ Load Sales Data</button>
    </div>

    <div class="demo-section">
        <h2>üéØ How It Works</h2>
        <ul>
            <li><strong>Automatic Field Detection:</strong> The system analyzes your data to identify category fields (strings) and numeric fields</li>
            <li><strong>Dynamic Scaling:</strong> Charts automatically scale based on your data range</li>
            <li><strong>Smart Chart Types:</strong>
                <ul>
                    <li><strong>Line/Bar:</strong> Show multiple numeric series over categories</li>
                    <li><strong>Pie:</strong> Can aggregate field totals or use explicit value/label pairs</li>
                    <li><strong>Scatter:</strong> Maps first two numeric fields to X/Y axes, optional third for bubble size</li>
                </ul>
            </li>
            <li><strong>Dynamic Legends:</strong> Legends update automatically to show the relevant data series</li>
            <li><strong>Color Assignment:</strong> Colors are automatically assigned from a predefined palette</li>
        </ul>
    </div>

    <div class="demo-section">
        <h2>üíª Usage in Your App</h2>
        <div class="data-sample">
// Update chart data from anywhere in your application
window.updateChartData([
  { category: 'A', value1: 10, value2: 20 },
  { category: 'B', value1: 15, value2: 25 },
  { category: 'C', value1: 12, value2: 18 }
]);

// Or call the dashboard method directly
window.hospitalDashboard.setChartData(yourData);
        </div>
    </div>

    <script>
        function updateWithTimeData() {
            const data = [
                { month: 'Jan', patients: 65, revenue: 45, satisfaction: 85 },
                { month: 'Feb', patients: 58, revenue: 52, satisfaction: 88 },
                { month: 'Mar', patients: 52, revenue: 58, satisfaction: 90 },
                { month: 'Apr', patients: 45, revenue: 62, satisfaction: 87 },
                { month: 'May', patients: 38, revenue: 68, satisfaction: 89 },
                { month: 'Jun', patients: 42, revenue: 71, satisfaction: 91 }
            ];
            
            if (window.parent && window.parent.updateChartData) {
                window.parent.updateChartData(data);
            } else if (window.updateChartData) {
                window.updateChartData(data);
            } else {
                alert('Chart system not found. Open this in the main application.');
            }
        }

        function updateWithPieData() {
            const data = [
                { label: 'Emergency', value: 35 },
                { label: 'Surgery', value: 25 },
                { label: 'General', value: 20 },
                { label: 'Pediatrics', value: 12 },
                { label: 'Cardiology', value: 8 }
            ];
            
            if (window.parent && window.parent.updateChartData) {
                window.parent.updateChartData(data);
            } else if (window.updateChartData) {
                window.updateChartData(data);
            } else {
                alert('Chart system not found. Open this in the main application.');
            }
        }

        function updateWithScatterData() {
            const data = [
                { department: 'ICU', waitTime: 45, satisfaction: 78, patientLoad: 95 },
                { department: 'Emergency', waitTime: 65, satisfaction: 72, patientLoad: 88 },
                { department: 'Surgery', waitTime: 38, satisfaction: 85, patientLoad: 76 },
                { department: 'General', waitTime: 72, satisfaction: 68, patientLoad: 82 },
                { department: 'Pediatrics', waitTime: 28, satisfaction: 92, patientLoad: 65 },
                { department: 'Cardiology', waitTime: 55, satisfaction: 80, patientLoad: 78 }
            ];
            
            if (window.parent && window.parent.updateChartData) {
                window.parent.updateChartData(data);
            } else if (window.updateChartData) {
                window.updateChartData(data);
            } else {
                alert('Chart system not found. Open this in the main application.');
            }
        }

        function updateWithSalesData() {
            const data = [
                { quarter: 'Q1 2023', sales: 120000, costs: 85000, profit: 35000 },
                { quarter: 'Q2 2023', sales: 135000, costs: 92000, profit: 43000 },
                { quarter: 'Q3 2023', sales: 142000, costs: 89000, profit: 53000 },
                { quarter: 'Q4 2023', sales: 158000, costs: 95000, profit: 63000 },
                { quarter: 'Q1 2024', sales: 165000, costs: 98000, profit: 67000 }
            ];
            
            if (window.parent && window.parent.updateChartData) {
                window.parent.updateChartData(data);
            } else if (window.updateChartData) {
                window.updateChartData(data);
            } else {
                alert('Chart system not found. Open this in the main application.');
            }
        }
    </script>
</body>
</html> 